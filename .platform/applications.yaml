-   name: 'app'
    type: 'nodejs:14'
    variables:
            env:
                UPSTREAM_REMOTE: "https://github.com/gatsbyjs/gatsby-starter-blog.git" 
    build:
            flavor: none
    dependencies:
            nodejs:
                yarn: "1.22.5"
    hooks:
            build: |
                set -e

                yarn --ignore-optional --frozen-lockfile 
                yarn build
    web:
        locations:
            '/':
                root: 'public'
                index: ['index.html']
                scripts: false
                allow: true
    source:
        operations:
            update:
                command: ls -a .platform
            update-dependencies:
                command: ./updates/dependencies.sh
            update-infrastructure:
                command: ./updates/infrastructure.sh
            update-upstream:
                command: ./updates/upstream.sh
